spring.application.name=trip-service
server.port=8081

# ============================================================
# R2DBC - Conexión reactiva para la aplicación
# ============================================================
spring.r2dbc.url=r2dbc:postgresql://localhost:5432/tripService
spring.r2dbc.username=postgres
spring.r2dbc.password=123456

# ============================================================
# JDBC - Solo para Flyway (migraciones)
# ============================================================
spring.datasource.url=jdbc:postgresql://localhost:5432/tripService
spring.datasource.username=postgres
spring.datasource.password=123456

# ============================================================
# Flyway - Configuración de migraciones
# ============================================================
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true
spring.flyway.url= jdbc:postgresql://localhost:5432/tripService
spring.flyway.user=postgres
spring.flyway.password=123456
spring.flyway.validate-on-migrate=true

# ============================================================
# Logging
# ============================================================
logging.level.root=INFO
logging.level.org.springframework=DEBUG
logging.level.reactor=DEBUG
logging.level.reactor.core.publisher=DEBUG
logging.level.io.r2dbc=DEBUG
logging.level.org.flywaydb=DEBUG

logging.level.org.springframework.amqp=DEBUG
logging.level.org.springframework.amqp.rabbit=DEBUG

logging.level.reactor.netty.http.client.HttpClient=DEBUG
logging.level.org.springframework.web.reactive.function.client.ExchangeFunctions=DEBUG
logging.level.org.springframework.web.reactive.function.client.WebClient=DEBUG
logging.level.edu.unimagdalena.tripservice=DEBUG

spring.main.web-application-type=reactive

# ============================================================
# Spring Cloud Config
# ============================================================
spring.cloud.config.enabled=false

# ============================================================
# Seguridad
# ============================================================
spring.security.oauth2.resourceserver.jwt.issuer-uri=http://localhost:9090/realms/ecoride
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=.endpoint.jwk-set-uri= = http://localhost:9090/realms/ecoride/protocol/openid-connect/certs
# ============================================================
# Eureka Client
# ============================================================
eureka.client.service-url.default-zone=http://localhost:8761/eureka
eureka.instance.instance-id=${spring.application.name}:${spring.application.instance_id:${random.value}}

# ============================================================
# RabbitMQ
# ============================================================
spring.rabbitmq.host=localhost
spring.rabbitmq.port=5672
spring.rabbitmq.username=guest
spring.rabbitmq.password=guest

# Reconexión / timeouts (milisegundos)
spring.rabbitmq.connection-timeout=10000

# Configuración del listener simple con retry
spring.rabbitmq.listener.simple.retry.enabled=true
spring.rabbitmq.listener.simple.retry.initial-interval=3000
spring.rabbitmq.listener.simple.retry.max-attempts=3
spring.rabbitmq.listener.simple.retry.multiplier=2

# ============================================================
# RabbitMQ - Exchanges, Queues y Routing Keys
# ============================================================
ecoride.rabbitmq.exchanges.reservation=reservation.exchange
ecoride.rabbitmq.exchanges.payment=payment.exchange
ecoride.rabbitmq.exchanges.trip=trip.exchange
ecoride.rabbitmq.exchanges.notification=notification.exchange

ecoride.rabbitmq.queues.reservation-requested=reservation.requested.queue
ecoride.rabbitmq.queues.payment-authorized=payment.authorized.queue
ecoride.rabbitmq.queues.payment-failed=payment.failed.queue
ecoride.rabbitmq.queues.trip-completed=trip.completed.queue
ecoride.rabbitmq.queues.notification-reservationConfirmed=notification.reservation.confirmed.queue
ecoride.rabbitmq.queues.notification-reservationCancelled=notification.reservation.cancelled.queue

ecoride.rabbitmq.routing-keys.reservation-requested=reservation.requested
ecoride.rabbitmq.routing-keys.payment-authorized=payment.authorized
ecoride.rabbitmq.routing-keys.payment-failed=payment.failed
ecoride.rabbitmq.routing-keys.trip-completed=trip.completed
ecoride.rabbitmq.routing-keys.notification-reservationConfirmed=reservation.confirmed
ecoride.rabbitmq.routing-keys.notification-reservationCancelled=reservation.cancelled