server.port=8083

spring.application.name=payment-service

# ============================================================
# R2DBC Configuration
# ============================================================
spring.r2dbc.url=r2dbc:postgresql://localhost:5432/paymentService
spring.r2dbc.username=postgres
spring.r2dbc.password=123456

# ============================================================
# JDBC for Flyway
# ============================================================
spring.datasource.url=jdbc:postgresql://localhost:5432/paymentService
spring.datasource.username=postgres
spring.datasource.password=123456

# ============================================================
# Flyway
# ============================================================
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true
spring.flyway.url= jdbc:postgresql://localhost:5432/paymentService
spring.flyway.user=postgres
spring.flyway.password=123456
spring.flyway.validate-on-migrate=true

# ============================================================
# RabbitMQ Connection
# ============================================================
spring.rabbitmq.host=localhost
spring.rabbitmq.port=5672
spring.rabbitmq.username=guest
spring.rabbitmq.password=guest

spring.cloud.config.enabled=false

# ============================================================
# RabbitMQ Configuration - Exchanges
# ============================================================
ecoride.rabbitmq.exchanges.reservation=reservation.exchange
ecoride.rabbitmq.exchanges.payment=payment.exchange
ecoride.rabbitmq.exchanges.trip=trip.exchange
ecoride.rabbitmq.exchanges.notification=notification.exchange

# ============================================================
# RabbitMQ Configuration - Queues (TripService)
# ============================================================
ecoride.rabbitmq.queues.reservation-requested=reservation.requested.queue
ecoride.rabbitmq.queues.payment-authorized=payment.authorized.queue
ecoride.rabbitmq.queues.payment-failed=payment.failed.queue

# ============================================================
# ? RabbitMQ Configuration - Queues (NotificationService)
# CRÍTICO: Estas queues permiten enviar notificaciones de pago
# ============================================================
ecoride.rabbitmq.queues.notification-payment-authorized=notification.paymentAuthorized.queue
ecoride.rabbitmq.queues.notification-payment-failed=notification.paymentFailed.queue

# ============================================================
# RabbitMQ Configuration - Routing Keys (TripService)
# ============================================================
ecoride.rabbitmq.routing-keys.reservation-requested=reservation.requested
ecoride.rabbitmq.routing-keys.payment-authorized=payment.authorized
ecoride.rabbitmq.routing-keys.payment-failed=payment.failed

# ============================================================
# ? RabbitMQ Configuration - Routing Keys (NotificationService)
# CRÍTICO: Estas routing keys conectan eventos de pago con NotificationService
# ============================================================
ecoride.rabbitmq.routing-keys.notification-payment-authorized=notification.paymentAuthorized
ecoride.rabbitmq.routing-keys.notification-payment-failed=notification.paymentFailed

# ============================================================
# Payment Provider Configuration
# ============================================================
payment.provider.mock=true
payment.provider.timeout-seconds=5

# ============================================================
# Eureka Client
# ============================================================
eureka.client.service-url.default-zone=http://localhost:8761/eureka
eureka.instance.instance-id=${spring.application.name}:${spring.application.instance_id:${random.value}}

# ============================================================
# Logging
# ============================================================
logging.level.root=INFO
logging.level.edu.unimagdalena=DEBUG
logging.level.org.springframework.amqp=DEBUG
logging.level.org.flywaydb=DEBUG